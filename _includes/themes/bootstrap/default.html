<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>{{ page.title }}</title>
    {% if page.description %}<meta name="description" content="{{ page.description }}">{% endif %}
    <meta name="author" content="{{ site.author.name }}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="{{ ASSET_PATH }}/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  
    <!--[if lt IE 9]>
      <script src="{{ ASSET_PATH }}/resources/respond/Respond.min.js"></script>
    <![endif]-->

    <link href="{{ BASE_PATH }}{{ site.JB.atom_path }}" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="{{ BASE_PATH }}{{ site.JB.rss_path }}" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>
    <nav class="navbar navbar-default" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="{{ HOME_PATH }}">{{ site.title }}</a>
        </div>

        <div class="collapse navbar-collapse navbar-ex1-collapse">
          <ul class="nav navbar-nav">
          	<li><a href="http://www.faacets.com">Faacets main site</a></li>
          <!--
            {% assign pages_list = site.pages %}
            {% assign group = 'navigation' %}
            {% include JB/pages_list %}
            -->
          </ul>
        </div>
      </div>
    </nav>
    


<!-- The following is an example of foldable menu:
<div class="container">
	<div class="row">
        <div class="well" style="width:300px; padding: 8px 0;">
                <ul class="nav nav-list">
                    <li><label class="tree-toggler nav-header"><a href="#">Header 1</a></label>
                        <ul class="nav nav-list tree">
                            <li><a href="#">Link</a></li>
                            <li><a href="#">Link</a></li>
                            <li><label class="tree-toggler nav-header">Header 1.1</label>
                                <ul class="nav nav-list tree">
                                    <li><a href="#">Link</a></li>
                                    <li><a href="#">Link</a></li>
                                    <li><label class="tree-toggler nav-header">Header 1.1.1</label>
                                        <ul class="nav nav-list tree">
                                            <li><a href="#">Link</a></li>
                                            <li><a href="#">Link</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
        </div>
	</div>
</div> -->
    
    <div class="container">
        <!-- We add a menu on the left -->
        <!-- The menu will display all pages which have been given a variable 'parent' which
             relates it somehow to the 'main' page. The menu follows the tree structure defined by
             the pairs of variables 'title' and 'parent': a page appears as submenu of another one
             iff its parent name is the same as the title of the first page. Pages with no parents
             must be given the parent name 'main'. -->
        {% assign pages1 = site.pages | sort:"url"  %}
        <div class="col-md-3">
                <div class="well">
                    <ul class="nav nav-list">
                        {% for p1 in pages1 %}
                          {% if p1.parent == "main" %}
                            <!-- <li><label class="tree-toggler nav-header">{{p1.title}}</label> -->
                            <li><label class="tree-toggler nav-header"><a {% if p.url == page.url %}class="active"{% endif %} href="{{p1.url}}">{{p1.title}}</a></label>
                              <!-- Now we look for all pages which have this main page as parent -->
                              {% assign pages2 = site.pages | sort:"url" %}
                              <ul class="nav nav-list tree">
                                {% for p2 in pages2 %}
                                  {% if p2.parent == p1.title %}
                                  <li><a {% if p.url == page.url %}class="active"{% endif %} href="{{p2.url}}">{{p2.title}}</a></li>
                                  {% endif %}
                                {% endfor %}
                              </ul>
                            </li>
                          {% endif %}
                        {% endfor %}
                    </ul>
                </div>
        </div>

        <div class="col-md-9">
          {{ content }}
        </div>
    
        <!-- Simpler, but unstructured menu
        <div class="col-md-3">
        <div class="nav">
        {% assign pages = site.pages | sort:"url"  %}
        <ul class="nav nav-pills nav-stacked">
          {% for p in pages %}
            <li>
              <a {% if p.url == page.url %}class="active"{% endif %} href="{{ p.url }}">
                {{ p.title }}
              </a>
            </li>
          {% endfor %}
        </ul>
        </div>
        </div> -->
    </div>
 
    <hr>
    <footer>
      <p>
        &copy; {{ site.time | date: '%Y' }} {{ site.author.name }}
        <span class="pull-right text-muted">
          powered by
          <a href="http://dbtek.github.io/jekyll-bootstrap-3" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll-Bootstrap-3</a>
          and <a href="http://getbootstrap.com" target="_blank">Twitter Bootstrap 3.0.3</a>
        </span>
      </p>
    </footer>
 

    {% include JB/analytics %}
    <script src="{{ ASSET_PATH }}/resources/jquery/jquery.min.js"></script>
    <script src="{{ ASSET_PATH }}/resources/bootstrap/js/bootstrap.min.js"></script>
  </body>
  
  <!-- We need some scripts to deal with the menu -->
  <script>
    $(document).ready(function () {
        $('label.tree-toggler').click(function () {
            $(this).parent().children('ul.tree').toggle(300);
        });
    });
  </script>

</html>
